# 边缘检测

边缘检测是通过表示数字图像中亮度变化明显的点来实现。图像属性中显著变化通常反映了属性的重要事件和变化。常用的边缘检测算法大多是以原始图像灰度值为基础,通过考察图像的每个像素的某个邻域内 灰度的变化,利用边缘一阶或二阶导数的规律来检测边缘。

# sobel边缘检测
参考链接：[https://zhuanlan.zhihu.com/p/115247308](https://zhuanlan.zhihu.com/p/115247308)

## 卷积
使用sobel做边缘检测的原理是使用sobel算子作为卷积核对图像进行卷积操作，在这里简单说明一下卷积原理。

卷积公式：

![](https://www.zhihu.com/equation?tex=y%28t%29+%3D+%5Cint_%7B-%5Cinfty%7D%5E%7B%2B%5Cinfty%7Dx%28p%29h%28t-p%29dp+%3D+x%28t%29+%2A+h%28t%29++%5Ctag%7B1%7D%5C%5C+)

y(t)为h(t)在x(t)上的卷积，t为卷积核大小。

##Sobel卷积算子，x轴方向的变化和y轴方向的变化
![](https://pic2.zhimg.com/80/v2-4ff652a13208899faaa7cfaf04b4578d_1440w.jpg)

若A为原始图像，那么在x方向上的卷积为：

	G(x) = A * Gx

	G(x) = [f(x+1, y-1) + 2*f(x+1, y) + f(x+1, y+1)] - [f(x-1, y-1) + 2*f(x-1, y) + f(x-1, y+1)]

y方向上的卷积为：

	G(y) = A * Gy
	
	G(y) = [f(x-1, y-1) + 2*f(x, y-1) + f(x+1, y-1)] - [f(x-1, y+1) + 2*f(x, y+1) + f(x+1, y+1)]

其中f(a, b)表示图像(a, b)点的灰度值。

该点灰度的梯度为：
	
	G = sqrt(G(x)^2 + G(y)^2)

Sobel算子根据像素点上下、左右邻点灰度加权差，在边缘处达到极值这一现象检测边缘。对噪声具有平滑作用，提供较为精确的边缘方向信息，边缘定位精度不够高。当对精度要求不是很高时，是一种较为常用的边缘检测方法。

如果G大于某一阈值则认为该点为边缘点。

#canny边缘检测

参考链接：[https://zhuanlan.zhihu.com/p/42122107](https://zhuanlan.zhihu.com/p/42122107)

canny边缘检测算法包含四个步骤：

## 高斯滤波

Canny边缘检测使用高斯滤波的主要目的是为了降噪，让图像变得平滑，但是高斯滤波也会使图像变得模糊，增大边缘宽度。

对于(m, n)位置的像素点，假设其灰度值为f(m, n)，经过高斯滤波之后该点的灰度值：

![](https://www.zhihu.com/equation?tex=g_%5Csigma%28m%2Cn%29+%3D+%5Cfrac%7B1%7D%7B%5Csqrt%7B2%5Cpi%5Csigma%5E2%7D%7De%5E%7B-%5Cfrac%7Bm%5E2%2Bn%5E2%7D%7B2%5Csigma%5E2%7D%7D%5Ccdot%7Bf%28m%2Cn%29%7D)

##计算像素点灰度梯度与梯度方向

可以使用上面提到的sobel算子计算像素点的灰度梯度

	G = sqrt(G(x)^2 + G(y)^2)

梯度方向为：

	θ = arctan(G(y) / G(x))

### 过滤非最大值

上面提到，使用高斯滤波时由于会导致图像变模糊，加大边缘宽度，因此需要一个规则来过滤不是边缘的点：如果一个像素是边缘像素，那么这个像素在梯度方向的梯度值是最大的，否则不是边缘，将其灰度值设置为0；

![](https://pic3.zhimg.com/80/v2-bee3a70b859a2a0c49a8ff7f78d03cf2_1440w.jpg)

### 使用上下阈值来检测边缘

设置一个上阈值maxVal一个下阈值minVal，大于maxVal的点都被检测为边缘像素，小于minVal被检测为非边缘像素，在两个阈值中间的像素点，如果与确定为边缘的像素点（上一个步骤MT(m, n)）邻接，就判断为边缘，反之为非边缘。